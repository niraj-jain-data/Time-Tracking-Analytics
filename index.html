<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PSW 2-Year Time Flow — Upskilling & Job Prep</title>
  <!-- Tailwind CDN for quick styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Small flow-chart style */
    .card { min-height: 120px; }
    .step { transition: transform .18s ease, box-shadow .18s ease; }
    .step:active { transform: translateY(2px); }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">
  <div class="max-w-4xl mx-auto p-6">
    <header class="mb-6">
      <h1 class="text-2xl font-semibold">PSW 2-Year Time Flow — How much time left for upskilling & job hunt</h1>
      <p class="text-sm text-slate-600 mt-2">Enter your PSW end date (optional). Click <strong>Start</strong>, then use <strong>Next</strong> to walk through each time removal step-by-step.</p>
    </header>

    <div class="bg-white p-6 rounded-xl shadow mb-6">
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 items-end">
        <div>
          <label class="block text-sm font-medium text-slate-700">PSW end date (optional)</label>
          <input id="pswEnd" type="date" class="mt-1 block w-full rounded-md border-slate-200 shadow-sm" />
          <p class="text-xs text-slate-500 mt-1">If left blank, 2 years = 730 days is used (default).</p>
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-700">Vacation days per year (assumption)</label>
          <input id="vacPerYear" type="number" min="0" value="25" class="mt-1 block w-full rounded-md border-slate-200 shadow-sm" />
          <p class="text-xs text-slate-500 mt-1">You can change this to match your typical time off.</p>
        </div>
        <div class="text-right">
          <button id="startBtn" class="px-4 py-2 bg-indigo-600 text-white rounded shadow hover:bg-indigo-700">Start</button>
        </div>
      </div>
    </div>

    <main>
      <div id="flowContainer" class="space-y-4 hidden">
        <!-- Overview card -->
        <section class="bg-white p-5 rounded-xl shadow">
          <div class="flex justify-between items-start">
            <div>
              <h2 class="text-lg font-semibold">Overview</h2>
              <p class="text-sm text-slate-600 mt-1">Total span: <span id="totalDays">—</span> days / <span id="totalHours">—</span> hours</p>
            </div>
            <div class="text-right">
              <p class="text-sm">Remaining (calendar):</p>
              <p class="mono text-xl font-medium" id="remainingDays">— days</p>
              <p class="mono text-sm text-slate-500" id="remainingHours">— hours</p>
            </div>
          </div>
        </section>

        <!-- Steps -->
        <section class="grid md:grid-cols-2 gap-4">
          <!-- Left: steps/log -->
          <div class="space-y-3">
            <div id="stepCard" class="card bg-white p-4 rounded-xl shadow step">
              <h3 class="font-semibold" id="stepTitle">Step 0 — Initial</h3>
              <p class="text-sm text-slate-600 mt-1" id="stepDesc">Click Next to remove the first time block.</p>

              <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-2">
                <div class="p-3 bg-slate-50 rounded">
                  <div class="text-xs text-slate-500">Removed so far</div>
                  <div class="mono text-lg font-medium" id="removedHours">0 hours</div>
                </div>
                <div class="p-3 bg-slate-50 rounded">
                  <div class="text-xs text-slate-500">Remaining (calendar)</div>
                  <div class="mono text-lg font-medium" id="remHoursCard">— hours</div>
                </div>
              </div>
            </div>

            <div class="flex gap-2">
              <button id="nextBtn" class="px-4 py-2 bg-emerald-600 text-white rounded shadow hover:bg-emerald-700">Next</button>
              <button id="resetBtn" class="px-4 py-2 bg-slate-200 text-slate-700 rounded shadow">Reset</button>
            </div>

            <div class="text-sm text-slate-500">
              <p>Steps: Sleep → Eating → Exercise → Pooja → Social → Vacation → Result</p>
            </div>
          </div>

          <!-- Right: breakdown table -->
          <div class="bg-white p-4 rounded-xl shadow">
            <h4 class="font-semibold mb-2">Breakdown (per 2-year period)</h4>
            <div class="space-y-2">
              <div class="flex justify-between text-sm text-slate-600">
                <div>Total (2 years)</div>
                <div class="mono"><span id="tbTotalDays">730</span>d / <span id="tbTotalHours">17520</span>h</div>
              </div>
              <div class="flex justify-between">
                <div>Sleep (8h/day)</div>
                <div class="mono" id="tbSleep">5840 h (243.33 d)</div>
              </div>
              <div class="flex justify-between">
                <div>Eating (2h/day)</div>
                <div class="mono" id="tbEat">1460 h (60.83 d)</div>
              </div>
              <div class="flex justify-between">
                <div>Exercise (1h/day)</div>
                <div class="mono" id="tbExercise">730 h (30.42 d)</div>
              </div>
              <div class="flex justify-between">
                <div>Pooja (1h/day)</div>
                <div class="mono" id="tbPooja">730 h (30.42 d)</div>
              </div>
              <div class="flex justify-between">
                <div>Social media (1h/day)</div>
                <div class="mono" id="tbSocial">730 h (30.42 d)</div>
              </div>
              <div class="flex justify-between">
                <div>Vacation (user adjustable)</div>
                <div class="mono" id="tbVacation">1200 h (50 d)</div>
              </div>
              <hr class="my-2" />
              <div class="flex justify-between font-semibold">
                <div>Removed (sum)</div>
                <div class="mono" id="tbRemoved">10690 h</div>
              </div>
              <div class="flex justify-between font-semibold">
                <div>Left (2 years)</div>
                <div class="mono" id="tbLeft">6830 h (284.58 d)</div>
              </div>
            </div>
          </div>
        </section>

        <!-- Final analysis -->
        <section id="finalCard" class="bg-white p-5 rounded-xl shadow hidden">
          <h3 class="font-semibold">Final: Time available for upskilling, interviews & job performance</h3>
          <div class="mt-3 grid sm:grid-cols-2 gap-4">
            <div>
              <p class="text-sm text-slate-600">Available calendar time after removals:</p>
              <div class="mono text-2xl font-medium" id="finalLeftDays">— days</div>
              <div class="text-sm text-slate-500" id="finalLeftHours">— hours</div>
            </div>

            <div>
              <p class="text-sm text-slate-600">6 months requirement:</p>
              <ul class="list-disc ml-5 text-sm mt-2 text-slate-700">
                <li>Calendar 6 months = <span class="mono">182.5 days</span> = <span class="mono">4,380 hours</span></li>
                <li>Typical full-time 6 months ≈ <span class="mono">26 weeks × 40 hr</span> = <span class="mono">1,040 work hours</span></li>
              </ul>
            </div>
          </div>

          <div class="mt-4">
            <h4 class="font-semibold">Suggested allocation of available time (example)</h4>
            <p class="text-sm text-slate-600">You can adjust these on your own — this is a simple starting suggestion.</p>
            <div class="grid sm:grid-cols-3 gap-3 mt-3">
              <div class="p-3 bg-slate-50 rounded">
                <div class="text-xs text-slate-500">Upskilling (courses, projects)</div>
                <div class="mono text-lg font-medium" id="allocUpskill">— h</div>
              </div>
              <div class="p-3 bg-slate-50 rounded">
                <div class="text-xs text-slate-500">Interview prep & applications</div>
                <div class="mono text-lg font-medium" id="allocInterview">— h</div>
              </div>
              <div class="p-3 bg-slate-50 rounded">
                <div class="text-xs text-slate-500">Buffer / job performance reserve</div>
                <div class="mono text-lg font-medium" id="allocReserve">— h</div>
              </div>
            </div>
            <p class="text-xs text-slate-500 mt-2">Note: If the employer expects 6 months calendar time, you'll need to plan that in parallel with upskilling & job-hunting.</p>
          </div>
        </section>

        <footer class="mt-4 text-xs text-slate-500">
          <p>Tip: change vacation days if you take more/less leave. If your 2-year period contains a leap day, add 24 hours.</p>
          <p class="mt-1">Note for Windsurf users: Windsurf is an AI IDE — paste this file into your editor to preview live.</p>
        </footer>
      </div>
    </main>
  </div>

  <script>
    // State & constants
    const DAY_HOURS = 24;
    const defaultDays = 730; // 2 years
    const stepList = [
      { key: 'sleep', label: 'Sleep (8h/day)', hours: 8 * defaultDays },
      { key: 'eat', label: 'Eating (2h/day)', hours: 2 * defaultDays },
      { key: 'exercise', label: 'Exercise (1h/day)', hours: 1 * defaultDays },
      { key: 'pooja', label: 'Pooja (1h/day)', hours: 1 * defaultDays },
      { key: 'social', label: 'Social media (1h/day)', hours: 1 * defaultDays },
      // vacation is dynamic, compute later
    ];

    let state = {
      totalDays: defaultDays,
      totalHours: defaultDays * 24,
      stepIndex: -1,
      removedHours: 0,
      vacationHours: 1200
    };

    // DOM
    const flowContainer = document.getElementById('flowContainer');
    const startBtn = document.getElementById('startBtn');
    const nextBtn = document.getElementById('nextBtn');
    const resetBtn = document.getElementById('resetBtn');
    const pswEnd = document.getElementById('pswEnd');
    const vacPerYear = document.getElementById('vacPerYear');

    // display func
    function hrsToDays(hours) {
      return (hours / 24);
    }
    function formatHours(h) {
      return Math.round(h) + ' h';
    }
    function formatDays(d) {
      return (Math.round(d*100)/100) + ' d';
    }

    function refreshUI() {
      document.getElementById('totalDays').innerText = state.totalDays;
      document.getElementById('totalHours').innerText = state.totalHours;
      document.getElementById('remainingDays').innerText = formatDays((state.totalHours - state.removedHours)/24);
      document.getElementById('remainingHours').innerText = (Math.round(state.totalHours - state.removedHours)) + ' hours';

      document.getElementById('removedHours').innerText = Math.round(state.removedHours) + ' hours';
      document.getElementById('remHoursCard').innerText = Math.round(state.totalHours - state.removedHours) + ' hours';

      // breakdown table
      document.getElementById('tbTotalDays').innerText = state.totalDays;
      document.getElementById('tbTotalHours').innerText = state.totalHours;

      document.getElementById('tbSleep').innerText = (8 * state.totalDays) + ' h (' + formatDays(8 * state.totalDays / 24) + ')';
      document.getElementById('tbEat').innerText = (2 * state.totalDays) + ' h (' + formatDays(2 * state.totalDays / 24) + ')';
      document.getElementById('tbExercise').innerText = (1 * state.totalDays) + ' h (' + formatDays(1 * state.totalDays / 24) + ')';
      document.getElementById('tbPooja').innerText = (1 * state.totalDays) + ' h (' + formatDays(1 * state.totalDays / 24) + ')';
      document.getElementById('tbSocial').innerText = (1 * state.totalDays) + ' h (' + formatDays(1 * state.totalDays / 24) + ')';
      document.getElementById('tbVacation').innerText = state.vacationHours + ' h (' + formatDays(state.vacationHours/24) + ')';

      const removedSum = state.removedHours;
      const leftSum = state.totalHours - removedSum;
      document.getElementById('tbRemoved').innerText = Math.round(removedSum) + ' h';
      document.getElementById('tbLeft').innerText = Math.round(leftSum) + ' h (' + formatDays(leftSum/24) + ')';
      document.getElementById('remainingDays').innerText = formatDays(leftSum/24);
      document.getElementById('remainingHours').innerText = Math.round(leftSum) + ' hours';

      // Step card
      const idx = state.stepIndex;
      const stepName = idx >= 0 && idx < stepList.length ? stepList[idx].label :
                       (idx === stepList.length ? 'Vacation' : 'Initial');
      document.getElementById('stepTitle').innerText = 'Step ' + Math.max(0, idx+1) + ' — ' + stepName;
      document.getElementById('stepDesc').innerText = idx >= 0 ? 'Removed: ' + Math.round((idx >= 0 && idx < stepList.length) ? stepList[idx].hours : state.vacationHours) + ' h' : 'Click Next to remove the first time block.';

      // final card updates
      const finalLeftHours = Math.round(leftSum);
      document.getElementById('finalLeftDays').innerText = formatDays(finalLeftHours/24);
      document.getElementById('finalLeftHours').innerText = finalLeftHours + ' hours';
      // suggested allocation: example split: 50% upskill, 25% interviews, 25% reserve
      document.getElementById('allocUpskill').innerText = Math.round(finalLeftHours * 0.5) + ' h';
      document.getElementById('allocInterview').innerText = Math.round(finalLeftHours * 0.25) + ' h';
      document.getElementById('allocReserve').innerText = Math.round(finalLeftHours * 0.25) + ' h';
    }

    // compute vacation hours based on input
    function computeVacationHours() {
      const vacY = Number(vacPerYear.value) || 25;
      const vacDays = vacY * (state.totalDays / 365);
      state.vacationHours = vacDays * 24;
      return state.vacationHours;
    }

    // initialize
    startBtn.addEventListener('click', () => {
      // determine totalDays based on PSW end date if provided
      const endVal = pswEnd.value;
      if (endVal) {
        // construct Date then subtract 730 days to get start
        const endDate = new Date(endVal + 'T00:00:00');
        // compute start = end - 730 days
        const startMs = endDate.getTime() - (defaultDays * 24 * 60 * 60 * 1000);
        const startDate = new Date(startMs);
        // compute actual days between startDate (inclusive) and endDate (exclusive) as integer
        const diffDays = Math.round((endDate - startDate) / (1000*60*60*24));
        state.totalDays = diffDays;
      } else {
        state.totalDays = defaultDays;
      }
      state.totalHours = state.totalDays * 24;
      // recompute step hours according to actual days
      stepList[0].hours = 8 * state.totalDays;
      stepList[1].hours = 2 * state.totalDays;
      stepList[2].hours = 1 * state.totalDays;
      stepList[3].hours = 1 * state.totalDays;
      stepList[4].hours = 1 * state.totalDays;
      computeVacationHours();

      state.stepIndex = -1;
      state.removedHours = 0;
      flowContainer.classList.remove('hidden');
      document.getElementById('finalCard').classList.add('hidden');
      refreshUI();
    });

    nextBtn.addEventListener('click', () => {
      if (state.stepIndex < stepList.length) {
        state.stepIndex++;
        if (state.stepIndex < stepList.length) {
          state.removedHours += stepList[state.stepIndex].hours;
        } else {
          // vacation step
          computeVacationHours();
          state.removedHours += state.vacationHours;
        }
        refreshUI();
      }
      // When finished all steps show final card
      if (state.stepIndex >= stepList.length) {
        document.getElementById('finalCard').classList.remove('hidden');
      }
    });

    resetBtn.addEventListener('click', () => {
      state.stepIndex = -1;
      state.removedHours = 0;
      flowContainer.classList.add('hidden');
      document.getElementById('finalCard').classList.add('hidden');
      // optionally clear fields
    });

    // on vacation change update UI if already started
    vacPerYear.addEventListener('change', () => {
      if (!flowContainer.classList.contains('hidden')) {
        // recompute vacation and refresh
        computeVacationHours();
        refreshUI();
      }
    });

    // initial load: prepopulate numbers
    (function init() {
      computeVacationHours();
      refreshUI();
    })();
  </script>
</body>
</html>
